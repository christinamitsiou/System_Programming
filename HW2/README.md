
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

Η Εργασία αποτελείται από τα εξής αρχεία: 

1. Header Files (στο φάκελο include): 

    1.1. header.h:  

        Περιέχει τους ορισμούς των βιβλιοθηκών που χρησιμοποιούνται από τα προγράμματα. 
        Ορίζει μια δομή Shared_Data η οποία χρησιμέυει για την αποθήκευση της πληροφορίας που μοιράζονται τα threads.
        Επίσης ορίζει τις global μεταβλητές jobID_as_num,jobs_currently_running και concurrencyLevel.

    1.2. Queue.h:  

        Περιέχει τους ορισμούς των εξής δομών: 

        - Queue η οποία αντιπροσωπεύει μια δομή ουράς η οποία αντιπροσωπέυει τον buffer. 
        - Job_Info για τις πληροφορίες της καθεμίας από τις δουλειές που βρίσκονται στον buffer 
        - Queue_Node για την προσπέλαση των κόμβων της ουράς. 

        Επίσης περιέχει τους ορισμούς των συναρτήσεων που χρησιμοποιήθηκαν για την υλοποίηση 
        της ουράς. Αυτές είναι οι παρακάτω (με μικρές διαφορές απο την πρώτη εργασία):

        - Queue* queue_create(int max_size)
            Δημιουργεί και αρχικοποιεί μια καινούργια Queue μεγέθους max_size και επιστρέφει δείκτη σε αυτή.
        
        - bool is_queue_empty(Queue* q) 
            Ελέγχει εάν η ουρά είναι άδεια και επιστρέφει true or false ανάλογα. 

        - bool is_queue_full(Queue* q) 
            Ελέγχει εάν η ουρά είναι γεμάτη και επιστρέφει true or false ανάλογα. 

        - int queue_insert(Queue* q, Job_Info* info)
            Δημιουργεί και προσθέτει στο τέλος της ουράς q ένα καινούργιο κόμβο ο οποίος περιέχει τις πληροφορίες info 
            για την καινούργια διεργασία.

        - Job_Info* queue_remove(Queue* q)
            Αφαιρεί τον πρώτο κόμβο από την ουρά και επιστρέφει δείκτη Job_Info με τα στοιχεία της διεργασίας που αφαιρέθηκε.

        - int queue_remove_ID(char* jobID, Queue* q)
            Αφαιρεί τον κόμβο που περιέχει τα στοιχεία της διεργασίας με ID το jobID από την ουρά. Επιστρέφει 0 για επιτυχία αλλιώς -1.

        - int queue_find_ID(char* jobID, Queue* q)
            Ψάχνει τον κόμβο που περιέχει τις πληροφορίες της διεργασίας με ID το jobID. Αν τη βρει επιστρέφει τη θέση της στην ουρά,
            αλλιώς -1.

        - Queue_Node* queue_get_node(Queue* q, int pos)
            Επιστρέφει έναν δείκτη τύπου Queue_Node που δείχνει στον κόμβο στη θέση pos της ουράς. 

        - void print_queue(Queue* q)
            Εκτυπώνει όλα τα στοιχεία της ουράς με τη σειρά.

        - void queue_destroy(Queue* q)
            Καταστρέφει την ουρά απελευθερώνοντας όση μνήμη είχε δεσμεύσει για τους κόμβους της, τις πληροφορίες που αποθηκεύονταν
            σε αυτούς κοκ.

        - void destroy_node(Queue_Node* node)
            Καταστρέφει έναν κόμβο απελευθερώνοντας όση μνήμη είχε δεσμεύσει.

        - void destroy_job_info(Job_Info* job_info);
            Καταστρέφει μια δομή Job_Info απελευθερώνοντας όση μνήμη είχε δεσμεύσει.

    1.3. JES_helping_functions.h:  

        Περιέχει τους ορισμούς όλων των συναρτήσεων που διευκολύνουν την λειτουργία του jobExecutorServer. Αυτές είναι οι εξής: 

        - char* convert_jobID_to_string(); 
            Δημιουργεί ένα μοναδικό αναγνωριστικό διεργασίας με βάση τη global μεταβλητή jobID_as_num και επιστρέφει δείκτη σε αυτό.
            Επίσης αυξάνει το jobID_as_num κατά 1. 
        
        - char* format_issued_job_info(Job_Info* job_info)
            Δημιουργεί το μήνυμα εκτύπωσης που θα επιστραφεί στο χρήστη μετά την επιτυχή εισαγωγή μιας διεργασίας στην ουρά buffer.

        - char* format_concurrency_set(int concurrency)
            Δημιουργεί το μήνυμα εκτύπωσης που θα επιστραφεί στο χρήστη μετά την επιτυχή αλλαγή του concurrency.

        - char* format_removed_jobID(char* jobID)
            Δημιουργεί το μήνυμα εκτύπωσης που θα επιστραφεί στο χρήστη όταν η εργασία jobID βρεθεί και αφαιρεθεί απο την ουρά buffer.

        - char* format_not_found_jobID(char* jobID)
            Δημιουργεί το μήνυμα εκτύπωσης που θα επιστραφεί στο χρήστη αν η εργασία jobID δεν βρεθεί και συνεπώς δεν μπορεί ν'αφαιρεθεί
            απο την ουρά buffer.

        - char* format_file_output(int output_file_desc,char* jobID)
            Διαβάζει το αρχείο με file descriptor το output_file_desc και δημιουργεί το μήνυμα εκτύπωσης που θα επιστραφεί στο χρήστη,
            δηλαδή το αποτέλεσμα της exec* εντολής με το αναγνωριστικό jobId (start/end).

        - char* format_poll_output(Queue* buffer)
            Δημιουργεί το μήνυμα εκτύπωσης που θα επιστραφεί στο χρήστη μετά την εντολή poll.

        - int set_concurrency(int new_concurrency)
            Θέτει την καινούργια τιμή του concurrency.

        - int stop_job(char* jobID, Queue* buffer)
            Αφαιρεί την δουλειά jobID απο την ουρά buffer. Επιστρέφει 0 για επιτυχία αλλιώς -1.

    1.4. Thread_Functions.h:  
    
        Περιέχει τους ορισμούς όλων των συναρτήσεων για τα threads. Αυτές είναι οι εξής: 

        - void* main_thread_func(void* arg)
            Καλείται όταν δημιουργείται το main thread.

        - void* worker_thread_func(void* arg)
            Καλείται όταν δημιουργείται ενα worker thread.

        - void* controller_thread_func(void* arg);
            Καλείται όταν δημιουργείται ενα controller thread.

        - void child_server(Job_Info* job_to_execute)
            Δημιουργεί ένα αρχείο με και κάνει redirect το output της exec* εκει.

2. Source Files (στο φάκελο src): 

    2.1. jobCommander.c 

        Λαμβάνει το input από το χρήστη και κάνει έλεγχο για ελλιπείς ή λάθος εντολές. Εάν είναι σωστές παίρνει το όνομα του server
        και τη θύρα και συνδέεται σ' αυτόν μέσω ένός socket. Στη συνέχεια αξιοποιεί το socket για να στείλει τις εντολές στον server,
        και έπειτα περιμένει την απάντηση απο αυτόν. Μόλις τη λάβει την εκτυπώνει, κλείνει το socket και τερματίζει.

    2.2. jobExecutorServer.c

        Λαμβάνει το input από το χρήστη και κάνει έλεγχο για ελλιπείς ή λάθος εντολές. Αρχικοποιεί την ουρά που αντιπροσωπέυει τον
        buffer με το μέγεθος που δόθηκε στα ορίσματα. Έπειτα δημιουργεί ένα socket για να ακούει σε συνδέσείς, καθορίζει τη διεύθυνση
        και τη θύρα με βάση τα ορίσματα, και συνδέει το socket με αυτήν τη διεύθυνση. Επίσης αρχικοποιεί την global δομή shared_data
        και αποθηκευόντας τις πληροφορίες που θα χρησιμοποιηθούν απότα threads σ' αυτήν, ενω αρχικοποιεί επίσης και όλα τα mutexes και
        condition variables. Έπειτα δημιουργεί το main thread, περιμένει να τελειώσει, και τέλος καταστρέφει τις δομές που χρησιμοποιήθηκαν. 

    2.3. Queue.c 

        Υλοποίηση της ουράς. Υπάρχει μια main συνάρτηση, η οποία είναι commented out, η οποία χρησιμοποιήθηκε για testing των λειτουργιών
        της ουράς.

    2.4 JES_helping_functions.c

        Η υλοποίηση των βοηθητικών συναρτήσεων που αναφέρθηκαν παραπάνω.

    2.5 Thread_Functions.c

        Η υλοποίηση των συναρτήσεων των threads που αναφέρθηκαν παραπάνω.

3. Makefile 

    Κάποιες χρήσιμες εντολές είναι οι εξής: 

    - make: Κάνει compile όλα τα αρχεία.

    - make clean: Διαγράφει όλα τα αρχεία ου δημιουργήθηκαν από προηγούμενες εκτελέσεις. 

    - make new: Κάνει make clean και make. Μετά την εκτέλεση του το πρόγραμμα είναι έτοιμο να τρέξει από τη αρχή. 
    
    - make valgrind: Τρέχει τον jobExecutorServer με τη χρήση valgrind.

    - make jobs: κάνει compile τα βοηθητικά προγράμματα που βρίσκονται στο φάκελο tests.

4. Βοηθητικά προγράμματα (στο φάκελο tests):

    Προγράμματα χρησιμοποιήθηκαν στο testing της εντολής issueJob.

Παραδοχές/Ιδιαιτερότητες:

    - Ο buffer υλοποιήθηκε με την χρήση μιας ουράς, αξιοποιώντας κομμάτια κώδικα από την πρώτη εργασία.

    - Υπάρχουν κάποια printf που χρησιμοποιήθηκαν για testing τα οποία άφησα σε σχόλια σε περίπτωση που διευκολύνουν την διόρθωση.


/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
